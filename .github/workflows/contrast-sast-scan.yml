name: Contrast SAST Scan

on:
  workflow_dispatch:

jobs:
  sast-scan:
    runs-on: ubuntu-latest
    name: Run Contrast SAST Scan

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK 11
        uses: actions/setup-java@v2
        with:
          java-version: '11'
          distribution: 'adopt'

      - name: Run Contrast SAST Scan
        uses: ./
        with:
          contrast-api-url: ${{ vars.CONTRAST_API_URL }}
          jfrog-token: ${{ secrets.JFROG_TOKEN }}
          contrast-api-agent-version: ${{ vars.CONTRAST_AGENT_VERSION }}
          contrast-api-user-name: ${{ secrets.CONTRAST_API_USER_NAME }}
          contrast-api-api-key: ${{ secrets.CONTRAST_API_API_KEY }}
          contrast-api-service-key: ${{ secrets.CONTRAST_API_SERVICE_KEY }}
          contrast-api-organization: ${{ secrets.CONTRAST_API_ORGANIZATION }}
          contrast-api-auth-token: ${{ secrets.CONTRAST_AUTH_TOKEN }}
          contrast-api-resource-group: ${{ vars.CONTRAST_RESOURCE_GROUP }}

      # - name: Upload SAST Scan Results
      #   uses: actions/upload-artifact@v2
      #   with:
      #     name: sast-scan-results
      #     path: path/to/scan-results #Update this path
